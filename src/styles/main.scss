/*!
 Copyright (c) 2023 Acquisition Simplicity, Inc. All rights reserved.
 Not for distribution, reproduction, or use in derivative works without permission.
 */

@use "fonts";
@use "colors";
@use "shadow";
@use "typeography";

@use 'vuetify' with (
  $body-font-family: typeography.$acquisition-simplicity-font,
  $colors: (
    'blue': colors.$blue,
    'lightBlue': colors.$light-blue,
    'green': colors.$green,
    'amber': colors.$amber,
    'blue-grey': colors.$blue-grey,
    'red': colors.$red
  ),
  $typography: typeography.$list,
  $shadow-key-penumbra: shadow.$shadow-key-penumbra,
  $shadow-key-umbra: shadow.$shadow-key-umbra,
  $shadow-key-ambient: shadow.$shadow-key-ambient,
  $border-radius-root: 16px,
  $font-weights: (
    'semibold': 600
  )
);
@use "vuetify/lib/styles/tools";
@use 'vuetify/lib/components/VSwitch/variables' as vSwitchVariables;
@use 'vuetify/lib/components/VCard/variables' as vCardVariables;
@use "originalShadow";

/**
  Global Styles
 */
a {
  color: colors.$blue-base;
}
p {
  margin: {
    top: 0;
    bottom: 8px;
  };
}

/**
  Vuetify Style Overrides
 */

// ignore SCSS Linting
.font-weight-semibold {
}

.text-on-surface {
  color: rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity));
}

.v-tab {
  font-size: vuetify.$font-size-root !important;
  font-weight: map-get(map-get(vuetify.$typography, "body-1"), "weight");
  color: colors.$blue-grey-base;
}

.v-tab--selected {
  color: map-get(colors.$blue-grey, 'darken-2')
}

.v-input__details {
  padding-bottom: 4px;
}

.markdown, .ProseMirror {
  p:not(:first-child) {
    margin: {
      top: 12px;
    };
  }

  ul, ol {
    padding-left: 48px;
  }

  h3, h4, h5, h6 {
    margin-top: 12px;
  }

  blockquote {
    padding-left: 48px;
  }
}

/**
  Custom Global Classes
 */
.shrink {
  @extend .flex-shrink-1;
  @extend .flex-grow-0;
}

.grow {
  @extend .flex-shrink-0;
  @extend .flex-grow-1;
}

.pointer, .pointer > * {
  cursor: pointer !important;
}

.text-card-title {
  @extend .text-h5;
  @extend .text-blue-darken-2;
}


// VUETIFY 3.+ FIXES

// FIXME: UPSTREAM VAvatar does not apply margins when start and end props are applied
// TODO: File Bug Report
//  https://vuetifyjs.com/en/components/avatars/#props-end
//  https://vuetifyjs.com/en/components/avatars/#props-start
.v-avatar--start {
  margin-right: vuetify.$spacer * 2
}

.v-avatar--end {
  margin-left: vuetify.$spacer * 2
}

// FIXME: UPSTREAM VTab should not apply rounded borders
// https://github.com/vuetifyjs/vuetify/issues/17027
.v-btn.v-tab {
  border-radius: 0 !important;
}

// FIXME: UPSTREAM VCardTitle should not be truncated
// https://github.com/vuetifyjs/vuetify/issues/17278
.v-card-title {
  white-space: normal !important;
}

// VUETIFY 3.+ Extensions
.v-btn {
  &.v-btn--icon {
    &.v-btn--variant-outlined {
      border-width: 2px;
    }
  }
}

.rounded-card {
  border-radius: vCardVariables.$card-border-radius;
}

// Prevent overlay elements like .v-card__overlay from covering the target
.no-parent-overlay {
  z-index: 2;
}

// VUETIFY 3.+ Overrides
.v-switch__thumb {
  @include originalShadow.adjustableElevation(vSwitchVariables.$switch-thumb-elevation, true);
}

// VPageCard
.v-page-card {
  // The inner padding of the card should be 32px
  $page-padding-multiplier: 8;
  // There should be 24px padding between children in the card
  $page-between-padding-multiplier: 3;

  display: flex;
  flex-direction: column;
  gap: vuetify.$spacer * 6;

  // We have to apply padding to the children directly, because vuetify has hidden elements at the top and bottom of
  // the card. It's not ideal, but it's the only way to get the correct padding.
  > *:nth-child(2) {
    padding-top: vuetify.$spacer * $page-padding-multiplier;
  }

  > *:nth-last-child(2) {
    padding-bottom: vuetify.$spacer * $page-padding-multiplier;
  }

  > *:not(:nth-child(1), :nth-last-child(1), .v-card__loader, .v-card__underlay) {
    // Apply padding on the x axis
    padding: {
      left: vuetify.$spacer * $page-padding-multiplier;
      right: vuetify.$spacer * $page-padding-multiplier;
    }
    // Make sure the first and last elements have the correct padding on the y axis
    &:not(:nth-child(2)) {
      padding-top: vuetify.$spacer * $page-between-padding-multiplier;
    }
    &:not(:nth-last-child(2)) {
      padding-bottom: vuetify.$spacer * $page-between-padding-multiplier;
    }
  }

  > .v-card-title,
  .v-card-item > .v-card-item__content > .v-card-title,
  .v-page-card-title {
    color: map-get(colors.$blue, 'darken-2');
    font-size: tools.map-deep-get(vuetify.$typography, 'h5', 'size');
    font-weight: map-get(vuetify.$font-weights, 'semibold');
    line-height: tools.map-deep-get(vuetify.$typography, 'h5', 'line-height');
    letter-spacing: tools.map-deep-get(vuetify.$typography, 'h5', 'letter-spacing');
    font-family: tools.map-deep-get(vuetify.$typography, 'h5', 'font-family');
    text-transform: tools.map-deep-get(vuetify.$typography, 'h5', 'text-transform');
    padding: {
      top: 0;
      bottom: 0;
    }
  }

  > .v-card-text {
    display: flex;
    flex-direction: column;
    gap: vuetify.$spacer * 6;
  }
}

// VListItemCard
.v-list-item-card {
  // The inner padding of the card should be 32px
  $page-padding-y-multiplier: 4;
  $page-padding-x-multiplier: 6;
  // We have to apply padding to the children directly, because vuetify has hidden elements at the top and bottom of
  // the card. It's not ideal, but it's the only way to get the correct padding.
  > *:nth-child(2) {
    padding-top: vuetify.$spacer * $page-padding-y-multiplier;
  }

  > *:nth-last-child(2) {
    padding-bottom: vuetify.$spacer * $page-padding-y-multiplier;
  }

  > *:not(:nth-child(1), :nth-last-child(1), .v-card__loader, .v-card__underlay) {
    // Apply padding on the x axis
    padding: {
      left: vuetify.$spacer * $page-padding-x-multiplier;
      right: vuetify.$spacer * $page-padding-x-multiplier;
    }
  }
}
